function openMesBox(e,t){let o=document.querySelector(".message-box"),n=document.querySelector(".message-box .head .text");document.querySelector(".message-box .body").innerHTML=t,n.innerHTML=e,o.classList.add("shown")}function closeMesBox(){document.querySelector(".message-box").classList.remove("shown")}function resetCertForm(){let e=document.querySelector("#cert"),t=e.querySelectorAll(".certificate .text"),o=e.querySelectorAll("input");e.classList.remove("second-slide"),e.classList.remove("shown"),e.classList.remove("third-slide");for(let e of o)e.value="";for(let e of t)e.innerHTML="&nbsp;"}"1"!=localStorage.getItem("cookie-agree")&&document.querySelector(".cookie-policy").classList.add("shown");let ppInit=()=>{document.querySelector(".third-form .fields").innerHTML="",paypal.Buttons({createOrder:function(e,t){let o=document.querySelector("input[data-cert=amount]").value;return t.order.create({purchase_units:[{amount:{value:o.toString(),currency_code:"EUR"}}]})},onApprove:function(e,t){return openMesBox("Paiement traité","Le certificat sera envoyé bientôt"),resetCertForm(),t.order.capture().then(function(t){let o=new FormData;return o.append("orderID",e.orderID),o.append("action","check-order"),o.append("receiverName",document.querySelector("#cert [data-cert=to]").value),o.append("senderName",document.querySelector("#cert [data-cert=from]").value),o.append("sender",document.querySelector("#cert [name=your-name]").value),o.append("senderEmail",document.querySelector("#cert [name=your-email]").value),o.append("receiverEmail",document.querySelector("#cert [name=email-to]").value),fetch(API,{method:"post",body:o})})}}).render("#cert .third-form .fields")};$(document).ready(function(){let e=2*$(".nav .left").width(),t=!1,o=$("#contacts-add"),n=$("#privacy"),s=$("main"),r=null,a=!1;function c(){a=!($(window).width()>640)}function i(e){$("#"+e).addClass("shown")}$("input[name=date]").datepicker({minDate:0,maxDate:"+12M",dateFormat:"dd/mm/yy"});let l=$(".theme-changing");$(l).addClass("black"),$(".message-box .shadow, .message-box .close-mes-box").on("click",closeMesBox);let d=document.querySelectorAll("img[data-lazy]");for(let e of d)e.src=e.dataset.lazy;function u(){a?r&&(r.destroy(),r=null):r||(r=new PerfectScrollbar("main",{suppressScrollY:!0,useBothWheelAxes:!0}))}function m(){if($("body").toggleClass("menu-opened"),t)$(s).css({transform:"scale(1)","-webkit-transform":"scale(1)"});else{let t=$(s).width(),o=(t-e)/t;$(s).css({transform:"scale("+o+")","-webkit-transform":"scale("+o+")"})}t=!t}c(),u(),function(e,t,o){t/=100;let n=$(window).width()*t,r=!1;o=o||"shown",$(e).sort(function(e,t){return $(e).offset().left-$(t).offset().left});let c=()=>{for(;0!=e.length&&$($(e)[0]).offset().left<n;)$($(e)[0]).removeClass(o),e=$(e).slice(1)};a||($(s).bind("scroll",c),r=!0),$(s).scroll(),$(window).on("resize",function(){n=$(window).width()*t,a?($(s).unbind("scroll",c),r=!1):r||($(s).bind("scroll",c),r=!0)})}(".section-title-block, .sos-photo, #menu .cards, .press-item, .map-wrapper, #contacts .contacts, .wins, #contacts-add",80,"hide"),$("#menu .cards").each(function(){let e=$(this).find(".card");$(e).each(function(e){$(this).css("transition-delay",.2*e+"s")})}),$(s).css("transform","scale(1)"),$(window).on("resize",function(){e=2*$(".nav .left").width(),c(),u()}),$(".nav li a").on("click",m),$(".open-menu").on("click",m),$(".mob-nav a").on("click",m),$(s).on("scroll",function(){a?$(l).each(function(){let e=$(this).offset().top+$(this).height();e>$(n).offset().top?$(this).addClass("black"):$(this).removeClass("black"),e>$(o).offset().top&&$(this).removeClass("black")}):$(l).each(function(){let e=$(this).offset().left+$(this).width();e>$(n).offset().left?$(this).addClass("black"):$(this).removeClass("black"),e>$(o).offset().left&&$(this).removeClass("black")})}),$("button.reservation").on("click",function(){i("reservation")}),$(".popup .close-popup").on("click",function(){let e=$(this).parent(".popup");$(e).removeClass("shown"),$(e).find("input, textarea").each(function(){$(this).val(""),$(this).blur()})}),$(".popup form input, .popup form textarea").on("focus",function(){$(this).parent().addClass("triggered")}),$(".popup form input:not([name=date]), .popup form textarea").on("blur",function(){0==$(this).val().length&&$(this).parent().removeClass("triggered")}),$(".popup form input[name=date]").on("change",function(){0==$(this).val().length&&$(this).parent().removeClass("triggered")}),$("button.cert").on("click",function(){i("cert")}),$("#cert input.cert-field").on("input",function(){let e=$(this).data("cert"),t=$("#cert-"+e);$(this).val().length>0?$(t).html("amount"==e?$(this).val()+"€":$(this).val()):$(t).html("&nbsp;")});let f=$("#reservation form").validate();$("#reservation form").on("submit",function(e){if(e.preventDefault(),f.form()){let e=new FormData(this);e.append("action","reservation"),$.ajax({url:"/wp-admin/admin-ajax.php",method:"post",data:e,processData:!1,contentType:!1,success:e=>{"1"==e?($("#reservation").removeClass("shown"),openMesBox("Merci","Un million de mercis")):openMesBox("Erreur","Quelque chose s’est mal passé. Merci de réessayer ultérieurement.")}})}});let p=$("#cert form").validate();$(".next-form").on("click",function(e){let t=!0;$("#cert .first-form input").each(function(){1==t?t=p.element($(this)):p.element($(this))}),t&&$("#cert").addClass("second-slide"),e.preventDefault()}),$("#cert .back").on("click",function(e){let t=$("#cert");$(t).hasClass("second-slide")?$(t).removeClass("second-slide"):(ppInit(),$(t).removeClass("third-slide"),$(t).addClass("second-slide")),e.preventDefault()}),$("#cert .to-pay").on("click",function(e){let t=!0;$("#cert .second-form input").each(function(){1==t?t=p.element($(this)):p.element($(this))}),t&&($("#cert").removeClass("second-slide"),$("#cert").addClass("third-slide")),e.preventDefault()}),$("#menu .categories .category").on("click",function(){let e=$(this).data("menu");$("#menu .categories .category").removeClass("active"),$("#menu .menu-item").removeClass("shown"),$("#menu #menu-"+e).addClass("shown"),$(this).addClass("active")}),document.querySelector(".cookie-policy .agree").addEventListener("click",()=>{localStorage.setItem("cookie-agree","1"),document.querySelector(".cookie-policy").classList.remove("shown")})});